name: 'Repo File Sync'
description: 'Synchronize files from GitHub repositories with environment variable substitution'
author: 'Studist Corporation'

branding:
  icon: 'download'
  color: 'blue'

inputs:
  config:
    description: 'Path to the configuration YAML file'
    required: false
    default: '.github/repo-file-sync.yaml'
  
  github-token:
    description: 'GitHub token for private repository access'
    required: false
    default: ${{ github.token }}
  
  dry-run:
    description: 'Show what would be downloaded without actually downloading'
    required: false
    default: 'false'
  
  create-pr:
    description: 'Create a pull request with the synced files'
    required: false
    default: 'false'
  
  pr-title:
    description: 'Title for the pull request'
    required: false
    default: 'ðŸ”„ Sync files from repositories'
  
  pr-body:
    description: 'Body for the pull request'
    required: false
    default: 'Automated file sync from configured repositories'
  
  branch-name:
    description: 'Branch name for the pull request'
    required: false
    default: 'sync/repo-files'

outputs:
  files-synced:
    description: 'List of synced files in format: repo:file,repo:file'

runs:
  using: 'docker'
  image: 'Dockerfile'
  env:
    GITHUB_TOKEN: ${{ inputs.github-token }}
    INPUT_CONFIG: ${{ inputs.config }}
    INPUT_DRY_RUN: ${{ inputs.dry-run }}
    INPUT_CREATE_PR: ${{ inputs.create-pr }}
    INPUT_PR_TITLE: ${{ inputs.pr-title }}
    INPUT_PR_BODY: ${{ inputs.pr-body }}
    INPUT_BRANCH_NAME: ${{ inputs.branch-name }}